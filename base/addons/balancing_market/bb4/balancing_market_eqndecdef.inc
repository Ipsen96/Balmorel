SETS

SET SUB_T /ST1*ST4/ "Number of sub intervals"
SET S_BALANCING(S) /S01,S02/
SET T_BALANCING /T001,T004,T010/

PARAMETER
DE_VAR_T_REAL(R,T,SUB_T) = IF EXISTS VALUES, ELSE LOOP SUB_T DE_VAR_T(T) + (DE_VAR_T(T+1)-DE_VAR_T(T))/CARD(T)*(ORD(SUB_T)-1)
DE_REAL
TIMECONVERSION = CARD(SUB_T)



VARIABLES



EQUATIONS

FIRST_INTERVAL (Y,AAA,G,S,T)    ''


;


LAST_INTERVAL_RAMPING (IY411,IA,G,IS3,T_BALANCING,SUBT_T)$((NOT (ORD(T) EQ CARD(T)))..
VGE_T(IY411,IA,G,IS3,T+1) 
=E=
VGE_T_BALANCING(IY411,IA,G,IS3,T_BALANCING) 
;

QBALANCING(IY411,IR,IS3,T_BALANCING) ..

     PRODUCTION_FORECAST_ERROR(IY411,IA,G,IS3,T,T_BALANCING)
     + GENERATION_BALANCING_UP(IY411,IA,G,IS3,T,T_BALANCING)
     +DEMAND_SIDE_MANAGEMENT_DOWN(IY411,IA,G,IS3,T,SUB_T)
    =E=
     + GENERATION_BALANCING_DOWN(IY411,IA,G,IS3,T,T_BALANCING)
     DEMAND_FORECAST_ERROR(IY411,IA,G,IS3,T,SUB_T)
    +DEMAND_SIDE_MANAGEMENT_UP(IY411,IA,G,IS3,T,SUB_T)

;

MAX_BALANCING_PRODUCTION

GENERATION_BALANCING (IY411,IA,G,IS3,T,SUB_T) =L= (VGKNACCUNMNET + GKFX) - VGE_T(T)
;